{% extends "data_base.html" %}

{% block title %}Browse All PheCodes{% endblock %}

{% block content %}
<h1 class="text-center">Data Tables with Search</h1>

<!-- Table: Individual Phenotypes -->
<h2>Individual Phenotypes</h2>
<div id="individualTableContainer" class="table-responsive mb-4">
    <table id="individualTable" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Sex</th>
                <th>Population</th>
                <th>ICD10</th>
                <th>Phecode</th>
            </tr>
        </thead>
        <tbody>
            {% for row in individual_phenotypes %}
            <tr>
                <td>{{ row.sex }}</td>
                <td>{{ row.population }}</td>
                <td>{{ row.icd10 }}</td>
                <td>{{ row.phecode }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Table: Phecode -->
<h2>Phecode</h2>
<div id="phecodeTableContainer" class="table-responsive mb-4">
    <table id="phecodeTable" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Phecode</th>
                <th>Description</th>
                <th>Sex</th>
                <th>Group</th>
                <th>Phecode Exclude</th>
                <th>Cases</th>
                <th>Excluded</th>
            </tr>
        </thead>
        <tbody>
            {% for row in phecode %}
            <tr>
                <td><a href="/phecode/{{ row.phecode }}">{{ row.phecode }}</a></td>
                <td>{{ row.description }}</td>
                <td>{{ row.sex }}</td>
                <td>{{ row.group }}</td>
                <td>{{ row.phecode_exclude }}</td>
                <td>{{ row.cases }}</td>
                <td>{{ row.excluded }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Table: ICD10 Coding -->
<h2>ICD10 Coding</h2>
<div id="icd10TableContainer" class="table-responsive mb-4">
    <table id="icd10Table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Coding</th>
                <th>Meaning</th>
            </tr>
        </thead>
        <tbody>
            {% for row in icd10_coding %}
            <tr>
                <td>{{ row.coding }}</td>
                <td>{{ row.meaning }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block extra_js %}
{{ super() }}
<script>
    $(document).ready(function () {
        // Initialize DataTables for each table
        $('#individualTable').DataTable();
        $('#phecodeTable').DataTable();
        $('#icd10Table').DataTable();
    });
</script>
{% endblock %}